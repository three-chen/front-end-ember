{"version":3,"file":"ember.js","sources":["../../src/compiler/astParser.js","../../src/compiler/generate.js","../../src/compiler/index.js","../../src/lifeCycle.js","../../src/initMixin.js","../../src/vdom/vnode.js","../../src/vdom/index.js","../../src/index.js"],"sourcesContent":["// Regular Expressions for parsing tags and attributes\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\r\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`//标签名\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`)\r\nconst startTagClose = /^\\s*(\\/?)>/\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`)\r\nconst commentTag = /^<!\\--/\r\nconst templateText = /\\{\\{(.+?)\\}\\}/\r\n\r\nfunction parseHtmlToAst(html) {\r\n    let text = html;\r\n    let status = \"tag_open\";\r\n    let ast = {};\r\n    let astStack = [];\r\n    let currentMatch = null;\r\n    let brotherTag = [\"img\", \"br\", \"hr\", \"input\", \"link\", \"meta\", \"param\", \"source\", \"track\", \"comment\"];\r\n    let nextType = \"\";\r\n\r\n    while (text) {\r\n        switch (status) {\r\n            case \"tag_open\":\r\n                currentMatch = createAstElement(\"\", {}, \"\", 0, [], null,);\r\n                matchTagOpen();\r\n                break;\r\n            case \"tag_start\":\r\n                matchTagStart();\r\n                break;\r\n            case \"tag_attribute\":\r\n                matchTagAttribute();\r\n                break;\r\n            case \"tag_end\":\r\n                matchTagEnd();\r\n                break;\r\n            case \"tag_children\":\r\n                matchTagChildren();\r\n                break;\r\n            case \"tag_brother\":\r\n                matchTagBrother();\r\n                break;\r\n            case \"tag_father\":\r\n                matchTagFather();\r\n                break;\r\n            case \"text\":\r\n                matchText();\r\n                break;\r\n            case \"tag_close\":\r\n                status = \"tag_father\";\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    return ast;\r\n\r\n    function matchTagOpen() {\r\n        let endTagMatch = text.match(endTag);\r\n        if (!endTagMatch) {\r\n            if (text.indexOf('<') === 0) {\r\n                status = \"tag_start\";\r\n            } else {\r\n                status = \"text\";\r\n            }\r\n        } else {\r\n            advance(endTagMatch[0].length);\r\n            status = \"tag_close\";\r\n        }\r\n    }\r\n\r\n    function matchTagStart() {\r\n        const startTagMatch = text.match(startTagOpen);\r\n        // normal tag\r\n        if (startTagMatch) {\r\n            currentMatch.sel = startTagMatch[1];\r\n            currentMatch.type = 1;\r\n            advance(startTagMatch[0].length);\r\n            status = \"tag_attribute\";\r\n        }\r\n        //abnomal tag such as annotation\r\n        else {\r\n            const commentTagMatch = text.match(commentTag);\r\n            if (commentTagMatch) {\r\n                currentMatch.sel = \"comment\";\r\n                currentMatch.type = 8;\r\n                currentMatch.text = text.substring(0, text.indexOf('-->'));\r\n                advance(currentMatch.text.length + 2);\r\n                currentMatch.text += '-->';\r\n            }\r\n            status = \"tag_end\";\r\n        }\r\n    }\r\n\r\n    function matchTagAttribute() {\r\n        const attributeMatch = text.match(attribute);\r\n        if (attributeMatch) {\r\n            currentMatch.attrs[attributeMatch[1]] = attributeMatch[3] || attributeMatch[4] || attributeMatch[5] || '';\r\n            advance(attributeMatch[0].length);\r\n            status = \"tag_attribute\";\r\n        } else {\r\n            status = \"tag_end\";\r\n        }\r\n    }\r\n\r\n    function matchTagEnd() {\r\n        const endMatch = text.match(startTagClose);\r\n        if (brotherTag.includes(currentMatch.sel)) {\r\n            status = \"tag_brother\";\r\n        } else {\r\n            status = \"tag_children\"\r\n        }\r\n        advance(endMatch[0].length);\r\n    }\r\n\r\n    function matchText() {\r\n        let tempText = text.substring(0, text.indexOf('<'));\r\n        if (tempText) {\r\n            advance(tempText.length);\r\n            currentMatch.type = 3;\r\n            tempText = tempText.trim();\r\n            if (!tempText) {\r\n                status = \"tag_open\";\r\n                return;\r\n            }\r\n            // let temp = tempText.match(templateText);\r\n            // if (temp) {\r\n            //     currentMatch[\"token\"] = temp[1];\r\n            // }\r\n            currentMatch.text = tempText;\r\n        }\r\n        status = \"tag_brother\";\r\n    }\r\n\r\n    function matchTagChildren() {\r\n        pushMatch(currentMatch, \"children\");\r\n        status = \"tag_open\";\r\n    }\r\n\r\n    function matchTagBrother() {\r\n        pushMatch(currentMatch, \"brother\");\r\n        status = \"tag_open\";\r\n    }\r\n\r\n    function matchTagFather() {\r\n        pushMatch(currentMatch, \"father\");\r\n        status = \"tag_open\";\r\n    }\r\n\r\n    function createAstElement(sel, attrs, text, type, children, parent) {\r\n        return {\r\n            sel,\r\n            attrs,\r\n            text,\r\n            type,\r\n            children,\r\n            parent,\r\n        }\r\n    }\r\n\r\n    function pushMatch(match, type) {\r\n        let lastType;\r\n        if (type === \"father\") {\r\n            lastType = nextType;\r\n            nextType = \"father\";\r\n        }\r\n        if (astStack.length > 0) {\r\n            if (nextType === \"children\") {\r\n                astStack[astStack.length - 1].children.push(match);\r\n                match.parent = astStack[astStack.length - 1];\r\n                astStack.push(match);\r\n            } else if (nextType === \"brother\") {\r\n                astStack.pop();\r\n                astStack[astStack.length - 1].children.push(match);\r\n                match.parent = astStack[astStack.length - 1];\r\n                astStack.push(match);\r\n            } else if (nextType === \"father\") {\r\n                if (astStack[astStack.length - 1].children.length !== 0 || lastType !== \"children\") {\r\n                    astStack.pop();\r\n                }\r\n                type = \"brother\";\r\n            }\r\n        } else {\r\n            ast = match;\r\n            astStack.push(match);\r\n        }\r\n        nextType = type;\r\n    }\r\n\r\n    function advance(length) {\r\n        text = text.substring(length);\r\n    }\r\n}\r\nexport {\r\n    parseHtmlToAst\r\n}\r\n\r\n","/*\r\n_c('div',\r\n    {id:\"app\",style:{\"color\":\"red\",\"font-size\":1rem}},\r\n    _v(\"hello,\"+_s(name)+\"welcom\"),\r\n    _c('span',{class:\"text\"},_v(_s(age))),\r\n    _c('p',undefined,_v(\"welcom\"))\r\n)\r\n\r\n*/\r\n\r\nconst doubleBrace = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\r\nfunction generateChild(node) {\r\n    if (node.type === 1) {\r\n        return generate(node);\r\n    } else if (node.type === 3) {\r\n        let text = node.text;\r\n        if (!doubleBrace.test(text)) {\r\n            return `_v(${JSON.stringify(text)})`;\r\n        } else {\r\n            let match;\r\n            let code = [];\r\n            let index = 0;\r\n            let lastIndex = doubleBrace.lastIndex = 0;\r\n            while (match = doubleBrace.exec(text)) {\r\n                index = match.index;\r\n                if (index > lastIndex) {\r\n                    code.push(JSON.stringify(text.slice(lastIndex, index)));\r\n                }\r\n                code.push(`_s(${match[1].trim()})`);\r\n                lastIndex = doubleBrace.lastIndex;\r\n            }\r\n            if (lastIndex < text.length) {\r\n                code.push(JSON.stringify(text.slice(lastIndex)));\r\n            }\r\n            return `_v(${code.join('+')})`;\r\n        }\r\n    } else if (node.type === 8) {\r\n        return `_v(${JSON.stringify(node.text)})`;\r\n    }\r\n}\r\n\r\nfunction getChildren(ast) {\r\n    let children = ast.children;\r\n\r\n    if (children) {\r\n        return children.map((c) => {\r\n            return generateChild(c)\r\n        }).join(',');\r\n    }\r\n}\r\n\r\nfunction formatAttrs(attrs) {\r\n    let attrStr = \"\";\r\n    for (const key in attrs) {\r\n        if (Object.hasOwnProperty.call(attrs, key)) {\r\n            let value = attrs[key];\r\n            if (key === \"style\") {\r\n                let style = {};\r\n                let styleArray = value.split(';');\r\n                styleArray.forEach(el => {\r\n                    let [key, value] = el.split(':');\r\n                    style[key] = value;\r\n                });\r\n                value = style;\r\n            }\r\n            attrStr += `${key}:${JSON.stringify(value)},`;\r\n        }\r\n    }\r\n    attrStr = attrStr.substring(0, attrStr.length - 1);\r\n    return attrStr;\r\n}\r\n\r\nfunction generate(ast) {\r\n    let children = getChildren(ast);\r\n    let code = `_c('${ast.sel}',${Object.keys(ast.attrs).length > 0 ? `{${formatAttrs(ast.attrs)}}` : 'undefined'}${children.length > 0 ? `,${children}` : ''})`;\r\n\r\n    return code;\r\n}\r\n\r\nexport {\r\n    generate\r\n};\r\n\r\n","import { parseHtmlToAst } from \"./astParser\";\r\nimport { generate } from \"./generate\";\r\nfunction createRenderFunction(html) {\r\n    const ast = parseHtmlToAst(html);\r\n    const code = generate(ast);\r\n    console.log(code);\r\n    return new Function('_c', '_s', '_v', 'message', `return ${code}`);\r\n}\r\n\r\nexport {\r\n    createRenderFunction\r\n};\r\n\r\n","function mountComponent(vm) {\r\n    vm._update(vm._render());\r\n}\r\n\r\nfunction lifeCycleMixin(Ember) {\r\n    Ember.prototype._update = function (vnode) {\r\n        const vm = this;\r\n    }\r\n}\r\n\r\nexport {\r\n    lifeCycleMixin, mountComponent\r\n};\r\n\r\n","// import initState from './initState';\r\nimport { createRenderFunction } from './compiler';\r\nimport { mountComponent } from './lifeCycle';\r\n\r\nfunction initMixin(Ember) {\r\n    Ember.prototype._init = function (options) {\r\n        const vm = this;\r\n        vm.$options = options;\r\n        // initState(vm);\r\n        // initRender(vm);\r\n        if (vm.$options.el) {\r\n            vm.$mount(vm.$options.el);\r\n        }\r\n    }\r\n\r\n    Ember.prototype.$mount = function (el) {\r\n        const vm = this, options = vm.$options;\r\n        vm.$el = document.querySelector(el);\r\n        if (!options.render) {\r\n            options.render = createRenderFunction(vm.$el.outerHTML);\r\n        }\r\n\r\n        mountComponent(vm);\r\n    }\r\n}\r\n\r\nexport {\r\n    initMixin\r\n};\r\n\r\n","function createElement(tag, attrs = {}, ...children) {\r\n    return vnode(tag, attrs, children);\r\n}\r\n\r\nfunction createTextVnode(text) {\r\n    return vnode(undefined, undefined, undefined, text);\r\n}\r\n\r\nfunction vnode(tag, props, children, text) {\r\n    return {\r\n        tag,\r\n        props,\r\n        children,\r\n        text\r\n    }\r\n}\r\n\r\nexport {\r\n    createElement,\r\n    createTextVnode\r\n};\r\n\r\n","import { createElement, createTextVnode } from './vnode';\r\n\r\nfunction renderMixin(Ember) {\r\n    Ember.prototype._c = function () {\r\n        return createElement(...arguments);\r\n    }\r\n    Ember.prototype._s = function (value) {\r\n        if (value === undefined || value === null) {\r\n            return;\r\n        }\r\n        return typeof value === 'object' ? JSON.stringify(value) : value;\r\n    }\r\n    Ember.prototype._v = function (text) {\r\n        return createTextVnode(text);\r\n    }\r\n\r\n    Ember.prototype._render = function () {\r\n        const vm = this;\r\n        const render = vm.$options.render;\r\n        const vnode = render(vm._c, vm._s, vm._v, vm.$options.data.message);\r\n        console.log(vnode);\r\n        return vnode;\r\n    }\r\n}\r\n\r\nexport {\r\n    renderMixin\r\n};\r\n\r\n","import { initMixin } from './initMixin';\r\nimport { lifeCycleMixin } from './lifeCycle';\r\nimport { renderMixin } from './vdom';\r\n\r\nfunction Ember(options) {\r\n    this._init(options);\r\n}\r\n\r\ninitMixin(Ember);\r\nlifeCycleMixin(Ember);\r\nrenderMixin(Ember);\r\n\r\nexport default Ember;"],"names":["attribute","ncname","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","commentTag","parseHtmlToAst","html","text","status","ast","astStack","currentMatch","brotherTag","nextType","createAstElement","matchTagOpen","matchTagStart","matchTagAttribute","matchTagEnd","matchTagChildren","matchTagBrother","matchTagFather","matchText","endTagMatch","match","indexOf","advance","length","startTagMatch","sel","type","commentTagMatch","substring","attributeMatch","attrs","endMatch","includes","tempText","trim","pushMatch","children","parent","lastType","push","pop","doubleBrace","generateChild","node","generate","test","JSON","stringify","code","index","lastIndex","exec","slice","join","getChildren","map","c","formatAttrs","attrStr","key","Object","hasOwnProperty","call","value","style","styleArray","split","forEach","el","keys","createRenderFunction","console","log","Function","mountComponent","vm","_update","_render","lifeCycleMixin","Ember","prototype","vnode","initMixin","_init","options","$options","$mount","$el","document","querySelector","render","outerHTML","createElement","tag","createTextVnode","undefined","props","renderMixin","_c","arguments","_s","_v","data","message"],"mappings":"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"}